utillity functions for version 3.